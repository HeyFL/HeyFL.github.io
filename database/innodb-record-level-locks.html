<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><title>MySQL锁 - 神奇宝贝大师的技术博客</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="[原创]个人理解，请批判接受，有误请指正。转载请注明出处: https://heyfl.github.io/database/innodb-record-level-locks.html   官方参考  MySQL锁   InnoDB锁机制是基于索引建立的 如果SQL语句中匹配不到索引,那么就会升级为表锁   记录锁"><meta name="keywords" content="database,mysql,lock"><meta property="og:type" content="article"><meta property="og:title" content="MySQL锁"><meta property="og:url" content="https://heyfl.github.io/database/innodb-record-level-locks.html"><meta property="og:site_name" content="神奇宝贝大师的技术博客"><meta property="og:description" content="[原创]个人理解，请批判接受，有误请指正。转载请注明出处: https://heyfl.github.io/database/innodb-record-level-locks.html   官方参考  MySQL锁   InnoDB锁机制是基于索引建立的 如果SQL语句中匹配不到索引,那么就会升级为表锁   记录锁"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-08-26T11:14:49.627Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="MySQL锁"><meta name="twitter:description" content="[原创]个人理解，请批判接受，有误请指正。转载请注明出处: https://heyfl.github.io/database/innodb-record-level-locks.html   官方参考  MySQL锁   InnoDB锁机制是基于索引建立的 如果SQL语句中匹配不到索引,那么就会升级为表锁   记录锁"><link rel="icon" href="/images/avatar.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css"><link rel="stylesheet" href="/css/back-to-top.css"><link rel="stylesheet" href="/css/progressbar.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand is-flex-center"> <a class="navbar-item navbar-logo" href="/"><img src="/images/avatar.png" alt="MySQL锁" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"> <a class="navbar-item" href="/">主页</a> <a class="navbar-item" href="/archives">归档</a> <a class="navbar-item" href="/categories">分类</a> <a class="navbar-item" href="/tags">标签</a> <a class="navbar-item" href="/about.html">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" title="GitHub" href="https://github.com/HeyFL" rel="external nofollow noopener noreferrer"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container" style="max-width:80vw;width:80vw"><div class="columns"><div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card" style="border-style:solid;border-width:2px;border-color:#737373"><div class="card-content article"><h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal"> MySQL锁</h1><div class="post-meta"><div class="level-left" style="width:100%;display:block;text-align:center"><span><i class="far fa-calendar-alt"></i> <span>发表于</span> <span>2019-08-26</span></span> <span class="post-meta-divider">|</span><span class="far fa-eye"></span> <span id="busuanzi_container_page_pv" class="level-item has-text-grey">被围观 <span id="busuanzi_value_page_pv" class="foot-count">无数</span> 次</span><br><span><span class="far fa-folder"></span> <span>分类于</span> <span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/tags/database/">database</a>, <a class="has-link-grey -link" href="/tags/lock/">lock</a>, <a class="has-link-grey -link" href="/tags/mysql/">mysql</a></span> <span class="post-meta-divider">|</span><i class="far fa-clock"></i> <span>4 分钟 读完 (大约 671 个字)</span></div></div><div class="content"><blockquote><p><font size="3" color="red">[原创]</font>个人理解，请批判接受，有误请指正。转载请注明出处: <a href="#">https://heyfl.github.io/database/innodb-record-level-locks.html</a></p></blockquote><blockquote><p><a href="https://docs.oracle.com/cd/E17952_01/mysql-5.0-en/innodb-record-level-locks.html" rel="external nofollow noopener noreferrer" target="_blank">官方参考</a></p></blockquote><h2 id="mysql锁">MySQL锁</h2><blockquote><ul><li>InnoDB锁机制是基于索引建立的</li><li>如果SQL语句中匹配不到索引,那么就会升级为表锁</li></ul></blockquote><h3 id="记录锁">记录锁</h3><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- id 列为主键列或唯一索引列</span></span><br><span class="line"><span class="hljs-keyword">SELECT</span> * <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">id</span> = <span class="hljs-number">1</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">UPDATE</span>;</span><br><span class="line">或</span><br><span class="line"><span class="hljs-keyword">update</span> <span class="hljs-keyword">table</span> <span class="hljs-keyword">set</span> age=<span class="hljs-number">2</span> <span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">id</span> = <span class="hljs-number">1</span>;</span><br></pre></td></tr></table></figure><blockquote><p>通过唯一索引实现的记录锁,只会锁住当前记录(必须为<code>=</code>不然会退化为<code>临键锁</code>)</p></blockquote><h3 id="间隙锁">间隙锁</h3><blockquote><ul><li><strong>间隙锁<code>只有</code>在事务隔离级别 <code>RR(可重复读)</code>中才会生效</strong>.</li><li>为非唯一索引组成(如class,age等)</li></ul></blockquote><figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select student where age&gt;26 and age&lt;28 lock in share mode ;</span><br></pre></td></tr></table></figure><h4 id="使用间隙锁的条件">使用间隙锁的条件</h4><ul><li>命中普通索引锁定；</li><li>使用多列唯一索引；</li><li>使用唯一索引命中多行记录</li></ul><h4 id="临键锁-next-key-locks">临键锁(Next-key Locks)</h4><ul><li><strong>临键锁<code>只有</code>在事务隔离级别 <code>RR(可重复读)</code>中才会生效</strong></li><li>是记录锁与间隙锁的组合</li><li>可以是<code>唯一索引</code>,也可以是<code>非唯一索引</code>,对其都以间隙锁的形式进行锁定(<code>以唯一索引匹配,并且只匹配到一条数据除外</code>)</li></ul><h5 id="临键锁-next-key-locks-例子">临键锁(Next-key Locks) 例子:</h5><table><thead><tr><th>tno<code>(唯一索引)</code></th><th>tname</th><th>tsex</th><th>tbirthday</th><th>prof</th><th>depart</th><th>age<code>(非唯一索引)</code></th></tr></thead><tbody><tr><td>858</td><td>张旭</td><td>1</td><td>1969-03-12</td><td>讲师</td><td>电子工程系</td><td>25</td></tr><tr><td>857</td><td>张旭</td><td>女1</td><td>1969-03-12</td><td>讲师</td><td>电子工程系</td><td>25</td></tr><tr><td>856</td><td>张旭</td><td>男</td><td>1969-03-12</td><td>讲师</td><td>电子工程系</td><td>25</td></tr><tr><td>831</td><td>刘冰</td><td>女</td><td>1977-08-14</td><td>助教</td><td>电子工程系</td><td>29</td></tr><tr><td>825</td><td>王萍</td><td>女</td><td>1972-05-05</td><td>助教</td><td>计算机系</td><td>28</td></tr><tr><td>804</td><td>李诚</td><td>男</td><td>1958-12-02</td><td>副教授</td><td>计算机系</td><td>26</td></tr></tbody></table><blockquote><p>其中有唯一索引的<code>临键</code>为:<br> (-∞,804]<br> (804,825]<br> (825,831]<br> (831,856]<br> (856,857]<br> (857,858]<br> (858,+∞]</p></blockquote><blockquote><p>其中有非唯一索引的<code>临键</code>为:<br> (-∞,25]<br> (25,26]<br> (26,28]<br> (28,29]<br> (29,+∞]</p></blockquote><h5 id="非唯一索引临键锁验证"><strong><code>非唯一索引</code>临键锁验证</strong></h5><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- session1</span></span><br><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> teacher <span class="hljs-keyword">WHERE</span> age <span class="hljs-keyword">between</span> <span class="hljs-number">26</span> <span class="hljs-keyword">and</span> <span class="hljs-number">28</span> <span class="hljs-keyword">lock</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">share</span> <span class="hljs-keyword">mode</span> ;</span><br></pre></td></tr></table></figure><blockquote><p>这时候会锁定非唯一索引的<code>临键</code> <code>(25,29]</code><br> 所以我们测试<code>更新age=25成功</code> <code>插入age=27阻塞</code> <code>更新age=29阻塞</code> <code>插入age=30</code>成功即可验证</p></blockquote><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- session2</span></span><br><span class="line"><span class="hljs-comment">-- 更新age=25--&gt;成功</span></span><br><span class="line"><span class="hljs-keyword">update</span> teacher <span class="hljs-keyword">set</span> tsex=<span class="hljs-string">'女1'</span> <span class="hljs-keyword">WHERE</span> age=<span class="hljs-number">25</span>;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- 插入age=27阻塞</span></span><br><span class="line"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-string">`test`</span>.<span class="hljs-string">`teacher`</span> ( <span class="hljs-string">`tno`</span>, <span class="hljs-string">`tname`</span>, <span class="hljs-string">`tsex`</span>, <span class="hljs-string">`tbirthday`</span>, <span class="hljs-string">`prof`</span>, <span class="hljs-string">`depart`</span>,<span class="hljs-string">`age`</span>) <span class="hljs-keyword">values</span> ( <span class="hljs-string">'740'</span>, <span class="hljs-string">'张旭1'</span>, <span class="hljs-string">'12'</span>, <span class="hljs-string">'1969-03-12 00:00:00'</span>, <span class="hljs-string">'讲师'</span>, <span class="hljs-string">'电子工程系'</span>,<span class="hljs-number">27</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- 更新age=29--&gt;阻塞</span></span><br><span class="line"><span class="hljs-keyword">update</span> teacher <span class="hljs-keyword">set</span> tsex=<span class="hljs-string">'女1'</span> <span class="hljs-keyword">WHERE</span> age=<span class="hljs-number">29</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="hljs-comment">-- 更新age=30--&gt;成功</span></span><br><span class="line"><span class="hljs-keyword">insert</span> <span class="hljs-keyword">into</span> <span class="hljs-string">`test`</span>.<span class="hljs-string">`teacher`</span> ( <span class="hljs-string">`tno`</span>, <span class="hljs-string">`tname`</span>, <span class="hljs-string">`tsex`</span>, <span class="hljs-string">`tbirthday`</span>, <span class="hljs-string">`prof`</span>, <span class="hljs-string">`depart`</span>,<span class="hljs-string">`age`</span>) <span class="hljs-keyword">values</span> ( <span class="hljs-string">'740'</span>, <span class="hljs-string">'张旭1'</span>, <span class="hljs-string">'12'</span>, <span class="hljs-string">'1969-03-12 00:00:00'</span>, <span class="hljs-string">'讲师'</span>, <span class="hljs-string">'电子工程系'</span>,<span class="hljs-number">30</span>);</span><br></pre></td></tr></table></figure><h5 id="唯一索引临键锁验证"><strong><code>唯一索引</code>临键锁验证</strong></h5><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- session1</span></span><br><span class="line"><span class="hljs-keyword">select</span> * <span class="hljs-keyword">from</span> teacher <span class="hljs-keyword">WHERE</span> tno <span class="hljs-keyword">between</span> <span class="hljs-string">"831"</span> <span class="hljs-keyword">and</span> <span class="hljs-string">"856"</span> <span class="hljs-keyword">lock</span> <span class="hljs-keyword">in</span> <span class="hljs-keyword">share</span> <span class="hljs-keyword">mode</span> ;</span><br></pre></td></tr></table></figure><blockquote><p>根据上面的sql,我们匹配到<code>唯一索引</code>临键锁为:<code>(825,857]</code><br> 所以我们测试<code>更新tno=825--&gt;成功</code> <code>更新tno=857阻塞</code> <code>更新age=858成功</code>即可验证</p></blockquote><figure class="highlight sql hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">-- 更新tno="825"--&gt;成功</span></span><br><span class="line"><span class="hljs-keyword">update</span> teacher <span class="hljs-keyword">set</span> tsex=<span class="hljs-string">'女1'</span> <span class="hljs-keyword">WHERE</span> tno=<span class="hljs-string">"825"</span>;</span><br><span class="line"><span class="hljs-comment">-- 更新tno="857"--&gt;阻塞</span></span><br><span class="line"><span class="hljs-keyword">update</span> teacher <span class="hljs-keyword">set</span> tsex=<span class="hljs-string">'女1'</span> <span class="hljs-keyword">WHERE</span> tno=<span class="hljs-string">"857"</span>;</span><br><span class="line"><span class="hljs-comment">-- 更新tno="858"--&gt;成功</span></span><br><span class="line"><span class="hljs-keyword">update</span> teacher <span class="hljs-keyword">set</span> tsex=<span class="hljs-string">'女1'</span> <span class="hljs-keyword">WHERE</span> tno=<span class="hljs-string">"858"</span>;</span><br></pre></td></tr></table></figure><hr></div><div class="level is-size-7 is-uppercase"><div class="level-start"><div class="level-item"> <span class="is-size-6 has-text-grey has-mr-7">#</span> <a class="has-link-grey -link" href="/tags/database/">database</a>, <a class="has-link-grey -link" href="/tags/lock/">lock</a>, <a class="has-link-grey -link" href="/tags/mysql/">mysql</a></div></div></div></div><div style="text-align:center;color:#ccc;font-size:14px"> ------ 本文结束<i class="fa fa-paw"></i>感谢您的阅读 ------</div></div><div class="card card-transparent"><div class="level post-navigation is-flex-wrap is-mobile"><div class="level-end"> <a class="level level-item has-link-grey article-nav-next" href="/Spring/Spring-Circular-Dependencies.html"><span class="level-item">【Spring源码分析】循环依赖的处理</span><i class="level-item fas fa-chevron-right"></i></a></div></div></div><div class="card"><div class="card-content"><h3 class="title is-5 has-text-weight-normal">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://jjeejj.github.io/css/gitment.css"><script src="https://jjeejj.github.io/js/gitment.js"></script><script>var gitment=new Gitment({id:"Mon Aug 26 2019 18:59:26 GMT+0800",owner:"HeyFL",repo:"heyfl.github.io",oauth:{client_id:"5e29b8e11983abda2f99",client_secret:"1ebe24de503d7b6a285f9e4ac48fe6cad3f37cbe"}});gitment.render("comment-container")</script></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen has-order-1 column-left"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered"><div><figure class="image container is-128x128 has-mb-6"> <img class="is-rounded" src="/images/avatar.png" alt="Pokémon Master"></figure><p class="is-size-4 is-block"> Pokémon Master</p><p class="is-size-6 is-block"> Web Developer &amp; Designer</p><p class="is-size-6 is-flex is-flex-center has-text-grey"><i class="fas fa-map-marker-alt has-mr-7"></i> <span>ShenZhen, China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 文章</p><p class="title has-text-weight-normal"> 11</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 分类</p><p class="title has-text-weight-normal"> 8</p></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading"> 标签</p><p class="title has-text-weight-normal"> 16</p></div></div></nav><div class="level"> <a class="level-item button is-link is-rounded" href="https://github.com/HeyFL" rel="external nofollow noopener noreferrer" target="_blank">关注我</a></div><div class="level is-mobile"><a class="level-item button is-white is-marginless" target="_blank" title="Github" href="https://github.com/HeyFL" rel="external nofollow noopener noreferrer"><i class="fab fa-github"></i></a><a class="level-item button is-white is-marginless" target="_blank" title="QQ(361389383)" href="tencent://message/?uin=361389383" rel="external nofollow noopener noreferrer"><i class="fab fa-qq"></i></a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 分类</h3><ul class="menu-list"><li> <a class="level is-marginless" href="/categories/Bug-Log-Optimization/"><span class="level-start"><span class="level-item">Bug-Log&Optimization</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/Distributed/"><span class="level-start"><span class="level-item">Distributed</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/JVM/"><span class="level-start"><span class="level-item">JVM</span></span> <span class="level-end"><span class="level-item tag">2</span></span></a></li><li> <a class="level is-marginless" href="/categories/Make-A-Little-Progress-Every-Day/"><span class="level-start"><span class="level-item">Make-A-Little-Progress-Every-Day</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/Spring/"><span class="level-start"><span class="level-item">Spring</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/about/"><span class="level-start"><span class="level-item">about</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/database/"><span class="level-start"><span class="level-item">database</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/categories/redis/"><span class="level-start"><span class="level-item">redis</span></span> <span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label"> 目录</h3><ul class="menu-list"><li> <a class="is-flex" href="#mysql锁"><span class="has-mr-6">1</span> <span>MySQL锁</span></a><ul class="menu-list"><li> <a class="is-flex" href="#记录锁"><span class="has-mr-6">1.1</span> <span>记录锁</span></a></li><li> <a class="is-flex" href="#间隙锁"><span class="has-mr-6">1.2</span> <span>间隙锁</span></a><ul class="menu-list"><li> <a class="is-flex" href="#使用间隙锁的条件"><span class="has-mr-6">1.2.1</span> <span>使用间隙锁的条件</span></a></li><li> <a class="is-flex" href="#临键锁-next-key-locks"><span class="has-mr-6">1.2.2</span> <span>临键锁(Next-key Locks)</span></a></li></ul></li></ul></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen"><div class="card widget"><div class="card-content"><h3 class="menu-label"> 最新文章</h3><article class="media"><a href="/database/innodb-record-level-locks.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL锁"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-26T10:59:26.000Z">2019-08-26</time></div> <a href="/database/innodb-record-level-locks.html" class="has-link-black-ter is-size-6">MySQL锁</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/database/">database</a></p></div></div></article><article class="media"><a href="/Spring/Spring-Circular-Dependencies.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="【Spring源码分析】循环依赖的处理"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-22T03:22:00.000Z">2019-05-22</time></div> <a href="/Spring/Spring-Circular-Dependencies.html" class="has-link-black-ter is-size-6">【Spring源码分析】循环依赖的处理</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/Spring/">Spring</a></p></div></div></article><article class="media"><a href="/JVM/JVM-Memory-Structure-Stack.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="java虚拟机栈的内存结构"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-19T13:22:00.000Z">2019-02-19</time></div> <a href="/JVM/JVM-Memory-Structure-Stack.html" class="has-link-black-ter is-size-6">java虚拟机栈的内存结构</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/JVM/">JVM</a></p></div></div></article><article class="media"><a href="/JVM/JVM-Memory-Structure-Menu.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="JVM内存结构-总纲"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-16T05:21:00.000Z">2019-02-16</time></div> <a href="/JVM/JVM-Memory-Structure-Menu.html" class="has-link-black-ter is-size-6">JVM内存结构-总纲</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/JVM/">JVM</a></p></div></div></article><article class="media"><a href="/redis/Redis-Partitioning.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="Redis分片方案概要(Cluster or Codis)"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-15T07:21:00.000Z">2019-02-15</time></div> <a href="/redis/Redis-Partitioning.html" class="has-link-black-ter is-size-6">Redis分片方案概要(Cluster or Codis)</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/redis/">redis</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 归档</h3><ul class="menu-list"><li> <a class="level is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span> <span class="level-end"><span class="level-item tag">5</span></span></a></li><li> <a class="level is-marginless" href="/archives/2018/10/"><span class="level-start"><span class="level-item">十月 2018</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/1970/12/"><span class="level-start"><span class="level-item">十二月 1970</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"> <a class="tags has-addons" href="/tags/BUG/"><span class="tag">BUG</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Consul/"><span class="tag">Consul</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/JVM内存结构/"><span class="tag">JVM内存结构</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Spring-Cloud/"><span class="tag">Spring-Cloud</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/database/"><span class="tag">database</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/lock/"><span class="tag">lock</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span> <span class="tag is-grey">3</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/redis集群/"><span class="tag">redis集群</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/事务/"><span class="tag">事务</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/优化/"><span class="tag">优化</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/分布式/"><span class="tag">分布式</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/每天进步一点点/"><span class="tag">每天进步一点点</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/源码分析/"><span class="tag">源码分析</span> <span class="tag is-grey">1</span></a></div></div></div></div></div></div></div><div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right"><div class="card widget"><div class="card-content"><h3 class="menu-label"> 最新文章</h3><article class="media"><a href="/database/innodb-record-level-locks.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="MySQL锁"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-08-26T10:59:26.000Z">2019-08-26</time></div> <a href="/database/innodb-record-level-locks.html" class="has-link-black-ter is-size-6">MySQL锁</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/database/">database</a></p></div></div></article><article class="media"><a href="/Spring/Spring-Circular-Dependencies.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="【Spring源码分析】循环依赖的处理"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-05-22T03:22:00.000Z">2019-05-22</time></div> <a href="/Spring/Spring-Circular-Dependencies.html" class="has-link-black-ter is-size-6">【Spring源码分析】循环依赖的处理</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/Spring/">Spring</a></p></div></div></article><article class="media"><a href="/JVM/JVM-Memory-Structure-Stack.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="java虚拟机栈的内存结构"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-19T13:22:00.000Z">2019-02-19</time></div> <a href="/JVM/JVM-Memory-Structure-Stack.html" class="has-link-black-ter is-size-6">java虚拟机栈的内存结构</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/JVM/">JVM</a></p></div></div></article><article class="media"><a href="/JVM/JVM-Memory-Structure-Menu.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="JVM内存结构-总纲"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-16T05:21:00.000Z">2019-02-16</time></div> <a href="/JVM/JVM-Memory-Structure-Menu.html" class="has-link-black-ter is-size-6">JVM内存结构-总纲</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/JVM/">JVM</a></p></div></div></article><article class="media"><a href="/redis/Redis-Partitioning.html" class="media-left"><p class="image is-64x64"> <img class="thumbnail" src="/images/thumbnail.svg" alt="Redis分片方案概要(Cluster or Codis)"></p></a><div class="media-content"><div class="content"><div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-02-15T07:21:00.000Z">2019-02-15</time></div> <a href="/redis/Redis-Partitioning.html" class="has-link-black-ter is-size-6">Redis分片方案概要(Cluster or Codis)</a><p class="is-size-7 is-uppercase"> <a class="has-link-grey -link" href="/categories/redis/">redis</a></p></div></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 归档</h3><ul class="menu-list"><li> <a class="level is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">八月 2019</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">五月 2019</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2019/02/"><span class="level-start"><span class="level-item">二月 2019</span></span> <span class="level-end"><span class="level-item tag">5</span></span></a></li><li> <a class="level is-marginless" href="/archives/2018/10/"><span class="level-start"><span class="level-item">十月 2018</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2018/09/"><span class="level-start"><span class="level-item">九月 2018</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/2017/03/"><span class="level-start"><span class="level-item">三月 2017</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li><li> <a class="level is-marginless" href="/archives/1970/12/"><span class="level-start"><span class="level-item">十二月 1970</span></span> <span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label"> 标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"> <a class="tags has-addons" href="/tags/BUG/"><span class="tag">BUG</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Consul/"><span class="tag">Consul</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/JVM/"><span class="tag">JVM</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/JVM内存结构/"><span class="tag">JVM内存结构</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Spring/"><span class="tag">Spring</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/Spring-Cloud/"><span class="tag">Spring-Cloud</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/database/"><span class="tag">database</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/lock/"><span class="tag">lock</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/mysql/"><span class="tag">mysql</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/redis/"><span class="tag">redis</span> <span class="tag is-grey">3</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/redis集群/"><span class="tag">redis集群</span> <span class="tag is-grey">2</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/事务/"><span class="tag">事务</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/优化/"><span class="tag">优化</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/分布式/"><span class="tag">分布式</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/每天进步一点点/"><span class="tag">每天进步一点点</span> <span class="tag is-grey">1</span></a></div><div class="control"> <a class="tags has-addons" href="/tags/源码分析/"><span class="tag">源码分析</span> <span class="tag is-grey">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div id="power-count"><div class="outer"><div id="footer-info" class="inner"> &copy;2018 - 2019 神奇宝贝大师版权所有<br></div></div><div class="powered-by"><i class="fa fa-mouse-pointer"></i> <span id="busuanzi_container_site_pv">访问量:<span class="foot-count" id="busuanzi_value_site_pv">N^N</span></span><i class="fa fa-user"></i> <span id="busuanzi_container_site_uv">您是第<span class="foot-count" id="busuanzi_value_site_uv">N+1</span>个小伙伴</span></div></div><div class="container"><div class="level"><div class="level-start has-text-centered-mobile"> <a class="footer-logo is-block has-mb-6" href="/"><img src="/images/avatar.png" alt="MySQL锁" height="28"></a><p class="is-size-7"> &copy; 2019 神奇宝贝大师&nbsp; Powered by <a href="http://hexo.io/" target="_blank" rel="external nofollow noopener noreferrer">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="external nofollow noopener noreferrer">Icarus</a></p></div><div class="level-end"><div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle"><p class="control"><a class="button is-white is-large" target="_blank" title="GitHub" href="https://github.com/HeyFL" rel="external nofollow noopener noreferrer"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.min.js"></script><script>window.mermaid&&mermaid.initialize({theme:"forest"})</script><script>((window.gitter={}).chat={}).options={room:"HeyFL/community"}</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer="defer"></script><script>function eventDelegate(e,n,t,l){function o(e){var t=e||window.event,o=t.target||t.srcElement,r=t.currentTarget;for(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;0<=--o&&t.item(o)!==this;);return-1<o});o!==r;){if(o.matches(n)){var c=o;l.call(c,Array.prototype.slice.call(arguments))}o=o.parentNode}}t.split(".").forEach(function(t){Array.prototype.slice.call(document.querySelectorAll(e)).forEach(function(e){e.addEventListener(t,o)})})}eventDelegate("body",".gitter-open-chat-button","click",function(){$("#live2d-widget").attr("style","display:none")}),eventDelegate("body",".gitter-chat-embed-action-bar-item.gitter-chat-embed-action-bar-item-collapse-chat","click",function(){$("#live2d-widget").attr("style","")})</script><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN")</script><script src="/js/animation.js"></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer="defer"></script><script src="/js/gallery.js" defer="defer"></script><div id="outdated"><h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/" rel="external nofollow noopener noreferrer" target="_blank">Update my browser now</a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p></div><script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer="defer"></script><script>document.addEventListener("DOMContentLoaded",function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"flex"})})</script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer="defer"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer="defer"></script><script src="/js/clipboard.js" defer="defer"></script><script src="/js/main.js" defer="defer"></script><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"> <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(无标题)"},CONTENT_URL:"/content.json"}</script><script src="/js/insight.js" defer="defer"></script><link rel="stylesheet" href="/css/search.css"><link rel="stylesheet" href="/css/insight.css"><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,log:!1,model:{jsonPath:"/live2dw/assets/shizuku.model.json"},display:{position:"right",width:80,height:150},mobile:{show:!1}})</script></body></html>